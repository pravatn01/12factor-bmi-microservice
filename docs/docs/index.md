# BMI Calculator Microservice 🏋️‍♂️

A modern, BMI (Body Mass Index) calculator microservice built with FastAPI and Streamlit. This application follows the 12-Factor methodology for building software-as-a-service applications.

## ✨ Features

- **Real-time BMI Calculation**: Instantly calculate BMI with weight and height inputs
- **BMI History Tracking**: Store and view past BMI calculations
- **Modern UI**: Clean and responsive interface built with Streamlit
- **RESTful API**: Well-documented API endpoints using FastAPI
- **Database Integration**: Persistent storage using MySQL
- **Comprehensive Documentation**: Including API docs and deployment guides

## 🏭 12-Factor Compliance

This application implements key principles from the twelve-factor methodology for building modern, scalable applications.

### Implemented Principles

#### 1️⃣ Codebase

- Single codebase tracked in version control
- Enhanced with pre-commit hooks for code quality

#### 2️⃣ Dependencies

- Explicitly declared in requirements.txt
- Isolated in virtual environment

#### 3️⃣ Config

- Environment variables stored in .env
- Virtual environment setup for isolation

#### 4️⃣ Backing Services

- MySQL database treated as attached resource
- Clean separation of database configuration

#### 5️⃣ Processes

- Stateless application processes
- Clean separation of concerns

#### 6️⃣ Port Binding

- Services exported via port binding
- Backend and frontend on separate ports

#### 7️⃣ Concurrency

- Implemented using asyncio
- Scalable process model

#### 8️⃣ Disposability

- Fast startup and graceful shutdown
- Implemented using lifecycle event context managers

#### 9️⃣ Logs

- Implemented using Loguru
- Treated as event streams

## 🛠️ Tech Stack

- **Backend**: FastAPI (Python)
- **Frontend**: Streamlit
- **Database**: MySQL
- **Documentation**: MkDocs with Material theme
- **Testing**: pytest
- **Logging**: Loguru

## 📁 Project Structure

```
_12factor_bmi_microservice/              # Root directory
├── _12factor_bmi_microservice/          # Inner directory
│   ├── backend/                         # Backend service
│   │   └── main.py                      # FastAPI application
│   └── frontend/                        # Frontend service
│       └── app.py                       # Streamlit interface
├── tests/                               # Test files
│   └── test_bmi_api.py                  # API tests
├── docs/                                # Documentation
├── images/                              # Screenshots
├── .env                                 # Environment variables
└── requirements.txt                     # Dependencies
```

## 🔌 API Endpoints

### Calculate BMI

```http
POST /calculate-bmi
```

Request body:

```json
{
  "name": "string",
  "weight": "float", // in kilograms
  "height": "float" // in meters
}
```

### Get BMI History

```http
GET /bmi/history
```

### Clear History

```http
DELETE /bmi/history
```

## 📊 BMI Categories

| Category    | BMI Range |
| ----------- | --------- |
| Underweight | < 18.5    |
| Normal      | 18.5-24.9 |
| Overweight  | 25-29.9   |
| Obese       | ≥ 30      |

## 📚 Documentation Types

### API Documentation

The API documentation is automatically generated by FastAPI and is available when the backend service is running:

- **Swagger UI**: Available at `http://localhost:8000/docs`
- **ReDoc**: Available at `http://localhost:8000/redoc`

These provide interactive documentation for all API endpoints, including:

- Request/Response schemas
- Authentication methods
- Example requests
- Try-it-out functionality

### Project Documentation

You're currently viewing the project documentation, which covers:

- Getting Started Guide
- Architecture Overview
- Development Guide
- Deployment Instructions
- Testing Procedures
- Security Considerations

## 🔒 Security

- Input validation on both frontend and backend
- Database connection pooling
- Environment variable configuration
- No sensitive data exposure

## 🧪 Testing

The project includes comprehensive test coverage:

```python
def test_calculate_bmi_normal_weight(test_client):
    """Testing BMI calculation for normal weight"""
    test_input = {
        "name": "John Doe",
        "weight": 70.0,  # kg
        "height": 1.75   # meters
    }
    response = test_client.post("/calculate-bmi", json=test_input)
    assert response.status_code == 200
    data = response.json()
    assert data["category"] == "Normal weight"
```

## 🌟 Future Enhancements

- User authentication
- Data export functionality
- Metric/Imperial unit conversion
- BMI trends visualization
- Docker containerization
- CI/CD pipeline

## 📹 Video Tutorial

Check out our video tutorial on YouTube:

[![BMI Calculator Microservice Tutorial](https://img.youtube.com/vi/TaVXJhU9zj8/0.jpg)](https://www.youtube.com/watch?v=TaVXJhU9zj8)
